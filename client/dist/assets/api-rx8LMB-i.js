const u="https://2kdtuncj36tas5twwm7dsgpz5y0bkfkw.lambda-url.us-east-1.on.aws".replace(/\/+$/,"");class g extends Error{constructor(e,n,o){super(e),this.status=n,this.details=o,this.name="ApiError"}}async function a(s,e={}){const n=`${u}${s.startsWith("/")?"":"/"}${s}`,{method:o="GET",body:i,signal:d}=e,l={"Content-Type":"application/json"};try{const t=await fetch(n,{method:o,headers:l,body:i?JSON.stringify(i):void 0,credentials:"omit",signal:d});if(!t.ok){let r;try{r=await t.json()}catch{}throw new Error(`[API] ${o} ${s} failed: ${t.status} ${t.statusText}`+(r?` :: ${JSON.stringify(r)}`:""))}return(t.headers.get("content-type")||"").includes("application/json")?await t.json():await t.text()}catch(t){throw(t==null?void 0:t.name)==="AbortError"?new Error("[API] Request aborted"):new Error(`[API] Network/CORS error on ${o} ${s}: ${(t==null?void 0:t.message)||t}`)}}const c={health:()=>a("/health"),chat:s=>a("/chat",{method:"POST",body:s}),faq:s=>a(`/faq?subField=${encodeURIComponent(s)}`)};class h{constructor(){this.baseUrl=u,this.retryAttempts=3,this.retryDelay=1e3}async makeRequest(e,n={}){return a(e,n)}shouldRetry(e){return(e==null?void 0:e.name)==="NetworkError"||(e==null?void 0:e.name)==="TimeoutError"}delay(e){return new Promise(n=>setTimeout(n,e))}async checkHealth(){return c.health()}async getSubjects(){return[]}async sendChatMessage(e){const n={userQuestion:e.message,major:e.majorCategory,subField:e.subCategory,conversationId:e.sessionId,suggestCount:e.suggestCount??3,followupMode:e.followupMode??"multi"},o=await c.chat(n);return{id:`ai-${Date.now()}`,content:o.aiResponse,timestamp:new Date().toISOString(),sessionId:o.conversationId,processingTime:0,suggestions:o.suggestions}}async sendFeedback(e){return console.log(`Feedback received for message ${e.messageId}: ${e.feedback}`),{success:!0,message:"Feedback recorded"}}async testConnection(){try{return await this.checkHealth(),!0}catch{return!1}}}const y=new h;export{g as A,y as a};
