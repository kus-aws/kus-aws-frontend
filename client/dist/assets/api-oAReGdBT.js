const u="https://2kdtuncj36tas5twwm7dsgpz5y0bkfkw.lambda-url.us-east-1.on.aws".replace(/\/+$/,"");class y extends Error{constructor(e,n,r){super(e),this.status=n,this.details=r,this.name="ApiError"}}async function o(s,e={}){const n=`${u}${s.startsWith("/")?"":"/"}${s}`,{method:r="GET",body:c,signal:d}=e,h={"Content-Type":"application/json"};try{const t=await fetch(n,{method:r,headers:h,body:c?JSON.stringify(c):void 0,credentials:"omit",signal:d});if(!t.ok){let a;try{a=await t.json()}catch{}throw new Error(`[API] ${r} ${s} failed: ${t.status} ${t.statusText}`+(a?` :: ${JSON.stringify(a)}`:""))}return(t.headers.get("content-type")||"").includes("application/json")?await t.json():await t.text()}catch(t){throw(t==null?void 0:t.name)==="AbortError"?new Error("[API] Request aborted"):new Error(`[API] Network/CORS error on ${r} ${s}: ${(t==null?void 0:t.message)||t}`)}}const i={health:()=>o("/health"),chat:s=>o("/chat",{method:"POST",body:s}),faq:s=>o(`/faq?subField=${encodeURIComponent(s)}`)};class l{constructor(){this.baseUrl=u,this.retryAttempts=3,this.retryDelay=1e3}async makeRequest(e,n={}){return o(e,n)}shouldRetry(e){return(e==null?void 0:e.name)==="NetworkError"||(e==null?void 0:e.name)==="TimeoutError"}delay(e){return new Promise(n=>setTimeout(n,e))}async checkHealth(){return i.health()}async getSubjects(){return[]}async sendChatMessage(e){const n=await i.chat({userQuestion:e.message,major:e.majorCategory,subField:e.subCategory,conversationId:e.sessionId});return{id:`ai-${Date.now()}`,content:n.aiResponse,timestamp:new Date().toISOString(),sessionId:n.conversationId,processingTime:0}}async sendFeedback(e){return console.log(`Feedback received for message ${e.messageId}: ${e.feedback}`),{success:!0,message:"Feedback recorded"}}async testConnection(){try{return await this.checkHealth(),!0}catch{return!1}}}const w=new l;export{y as A,w as a};
